{"title":"Análisis de la Industria Cinematográfica","markdown":{"yaml":{"title":"Análisis de la Industria Cinematográfica","title-slide-attributes":{"data-background-image":"./imagenes/my_IA_img3.png","data-background-size":"cover","data-background-opacity":"0.5"},"date":"2023-12-01","format":{"revealjs":{"theme":"league","scrollable":true,"slide-level":2,"height":900,"width":1600,"toc":false,"center-title-slide":true,"preview-links":"auto","link-external-newwindow":true,"transition":"fade","fontcolor":"#262d36","highlight-style":"a11y","code-line-numbers":true,"number-sections":false,"slide-number":"c/t","incremental":false}},"footer":"##### <span style=\"color: darkred;\">[Quarto](https://quarto.org/)</span>\n","editor":{"markdown":{"wrap":72}}},"headingText":"Introducción","headingAttr":{"id":"","classes":[],"keyvalue":[["background-image","./imagenes/my_IA_img3.png"],["background-size","cover"],["background-opacity","0.5"]]},"containsRefs":false,"markdown":"\n\n\n**Objetivo**: Analizar y visualizar datos clave de la industria\ncinematográfica y proporcionar una visión integral de lo que han sido\n\"éxitos\" en este contexto. <br> <br> Destacamos el rendimiento\nfinanciero que han tenido las películas, pero también consideramos\ntendencias con respecto a género y franquicias/marcas y además hacemos\nuna mención adicional a los actores de Hollywood con más reconocimientos\nen la escena internacional.\n\n# Datos: {background-image=\"./imagenes/my_IA_img3.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nPara el trabajo hemos usado tres fuentes de datos principales: <br> <br>\n**1. Box Office Mojo**: Website de datos de películas y su rendimiento\nfinanciero. <br> <br> **2. IMDB (Internet Movie Data Base): \"**\nInformación sobre las TOP 1000 pelícuas a nivel mundial. Clasificadas\npor ratings del público.<br> <br> **3. Top 100 Hollywood Actors**:\nDataframe de Kaggle. Es un ranking objetivo de los actores de Holywood\nbasando en premios y nominaciones.<br>\n\n. . .\n\n```{r}\n#Packetes y carga de datos\n#|echo: false\n# Estos son los Packages que hemos utilizado\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(ggThemeAssist)\nlibrary(plotly)\nlibrary(sf)\nlibrary(maps)\nlibrary(tmap)\n```\n\n```{r}\n#Importamos Datos\n#|echo:false\nimbd_allTime <- read.csv(\"data/IMDB_Top1000_2023.csv\")\nboxoffice_top_world <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojointernationaltop1000.csv\")\nboxoffice_brands <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojobrandindices.csv\")\nboxoffice_genres <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojotopgenres.csv\")\nboxoffice_fran <-read.csv(\"data/Boxoffice_Reveneus/boxofficemojotopfranchises.csv\")\nactors <- read.csv(\"data/Top100_GOAT_Hollywood_Actors.csv\")\n```\n\n# 1. Las más exitosas de todos los tiempos {background-image=\"./imagenes/my_IA_img9.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\n::: highlight-box\n```{=html}\n<style>\n  p {\n    background-color: rgba(0, 0, 0, 0.5);\n    padding: 20px;\n    color: white;\n    border-radius: 10px;\n  }\n</style>\n```\nExisten diferentes maneras de medir el éxito de una película. Sin\nembargo, nosotros/as aquí consideraremos dos métricas: el desempeño en\ntaquilla y la opinión del público.\n:::\n\n------------------------------------------------------------------------\n\n## Películas más taquilleras de la historia {background-image=\"./imagenes/my_IA_img9.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nDe acuerdo a Box Office Mojo, estas son lás 5 películas más éxitosas en\ntaquilla.\n\n```{r}\n#| echo: false\nbo_allTime <- boxoffice_top_world %>%\n  select(Rank, Title, Worldwide.Lifetime.Gross, Year)\n\n#Tabla\nt1 <- bo_allTime %>% \n  slice_max(n = 5, order_by = -Rank) %>% #ascending order \n  gt() %>%\n  cols_label( Title = \"Título\"\n    ,Worldwide.Lifetime.Gross = \"Ingresos Brutos\", \n             Year = \"Año\") %>%\n  cols_width(c(Worldwide.Lifetime.Gross, Year) ~ pct(8)) %>%\n  cols_width(c(Rank) ~ pct(3)) %>%\n  fmt_number(columns = c(Worldwide.Lifetime.Gross),\n             decimals = 0, \n             sep_mark = \",\")  %>%\n  tab_header(title = \"Top  5 Películas\",\n             subtitle = \"Basado en éxito en taquilla\") %>%\n  tab_source_note(md(\"Fuente: datos de [BoxOffice Mojo ](https://www.kaggle.com/datasets/somnath2/box-office)\")) %>%\n  tab_footnote(footnote = \"Dataset extraido de Kaggle\", \n               placement = \"right\",\n               location = cells_title(\"title\")) |>\n  tab_options(\n    #table.width = pct(50)  \n    table.font.size = 30,\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5)\n  )\nt1\n```\n\n. . .\n\n**Fun fact:** La diferencia entre los puestos uno y dos es mínima, 50M\ndolares approx. <br> <br> Como podemos ver, es innegable que las\npelículas de acción y superheroes han generado un fuerte interés en el\npúblico.\n--- \n\n```{r}\n#| code-fold: true\n#Plot\ntop_10_p <- bo_allTime %>%\n  slice_max(n = 10, order_by = -Rank) %>%#ascending order\n  mutate(Title = forcats::fct_reorder(Title, Worldwide.Lifetime.Gross)) %>%\n  ggplot(aes(x = Title, y = Worldwide.Lifetime.Gross/(1000000))) + \n  geom_col(aes(fill = Title)) +\n  coord_flip() + \n  #scale_x_continuous(limits = c(0, max(bo_allTime$Worldwide.Lifetime.Gross) + 500),\n   #                  breaks = seq(0, max(bo_allTime$Worldwide.Lifetime.Gross) + 500, by = 250)) +  \n  geom_text(aes(label = Title), hjust = 1.05, vjust = 0.5, size = 3.5, ) +\n  labs(title = \"Top 10 Películas más taquilleras de la Historia\",\n       subtitle = \" Ingresos brutos en milliones\",\n       x = \"Ingresos brutos mundiales\",\n       y = \"Titulo\") +\n  theme_minimal() + theme(legend.position = \"none\", # Remove legend\n                          axis.text.y = element_blank())  \ntop_10_p\n```\n\n# 2. Top Marcas en el Cine {background-image=\"./imagenes/my_IA_img6.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nAhora analizaremos las productoras detras de los grandes éxitos. También desde una perspectiva financiera.\n\nComo podemos ver las productoras que encabezan la lista son: Marvel\nComics, Legendary Pictures y Lucasfilms. Como se ha mencionado, estas\nmarcas producen películas de superheroes y acción.\n\n#\n\n```{r}\n#| code-fold: true\ntop_stud_tab <- boxoffice_brands %>%\n  slice_max(n = 5, order_by = Total) %>%\n  select(Brand, Releases) \n\n#Tabla\nt3 <- top_stud_tab %>% \n  gt() %>%\n  cols_label( Brand = \"Marcas\",\n    Releases = \"Lanzamientos\") %>%\n # cols_width(c(Brand, Releases) ~ px(60))  %>%\n  tab_header(title = \"Top Marcas\", subtitle = \"Basado en éxito en taquilla\") %>%\ntab_source_note(md(\"Fuente: datos de [BoxOffice Mojo ](https://www.kaggle.com/datasets/somnath2/box-office)\"))%>%\n  tab_footnote(footnote = \"*Ingresos Brutos solo de USA y Canada\", \n               placement = \"right\",\n               location = cells_title(\"title\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(70),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE\n  )\nt3\n```\n--- \n\n```{r}\n#| code-fold: true\ntop_brands <- boxoffice_brands %>% slice_max(n = 10, order_by = Total)\ntop_brands$Brand <- as.factor(top_brands$Brand) #Brands as factor\n\n#Bubble Plot\nbubble_chart <- ggplot(top_brands, aes(x = Total/ (1000000), \n                                       y = Brand, size = Releases, \n                                       color = Brand)) +\n  geom_point(alpha = 0.7) +\n  xlim(c(0,16000)) +\n  scale_size_continuous(range = c(5, 15)) + #Setea el tamaño de los puntos\n  labs(title = \"Top 10 Marcas Cinematográficas\",\n       subtitle = \"De acuerdo a ingresos en taquilla\",\n       caption = \"*Ingresos Brutos solo de USA y Canada\",\n       x = \"Ingresos Brutos (en Millones)\",\n       y = \"Marcas\",\n       size = \"Releases\",\n       color = NULL) +\n  geom_vline(xintercept = 0) +\n  geom_hline(yintercept = \"Bad Robot\") +\n  theme_minimal() + theme(legend.title = element_blank()) + theme(legend.position = \"none\")\nbubble_chart\n```\n\n# 3. Las mejores de la historia...de acuerdo al público {background-image=\"./imagenes/my_IA_img8.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nLa segunda métrica que usaremos para medir el éxito de una película son\nlas críticas del público. Para ello usaremos la \"Internet Movie\nDatabase\". Así que a continuación, presentamos cuáles son las películas\ncon mejores ratings del público de la historia.\n\n# {background-image=\"./imagenes/my_IA_img8.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\n```{r}\n#| code-fold: true\n#Filtramos las 10 mejores películas según las críticas del público\nimbd_top_five <- imbd_allTime %>%\n  select(-X) %>%\narrange(desc(rating)) %>%\n   distinct(title, .keep_all = TRUE) %>% # Ordenamos de mayor a menor rating\n  slice_head(n = 5)         # Seleccionamos las 5 mejores películas\n#Creamos una tabla con las 5 mejores películas según las críticas del público\nbest_rated_table <- imbd_top_five %>%\n  dplyr::mutate(Rank = row_number()) %>%  # Agregamos una columna de rango empezando desde 1\n  gt() %>%\n  cols_move_to_start(\"Rank\") %>%\n  cols_label(\n    title = \"Título\",\n    rating = \"Rating\",\n    release_year = \"Año\",\n    genre = \"Género\"\n  ) %>%\n  fmt_number(columns = c(\"rating\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 5 Películas Mejor Calificadas por el Público\",\n    subtitle = \"Basado en las calificaciones de IMDb\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")\n  ) |>\n  tab_options(\n    table.font.size = 30,\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(1),\n    data_row.padding.horizontal = pct(0.3),\n    footnotes.multiline = FALSE\n  )\n\n# Imprimir la tabla\nbest_rated_table\n```\n\n\n# 4. IMBD Rating y Directores {background-image=\"./imagenes/my_IA_img10.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nDatos obtenidos de IMDb *(Internet Movie Database)* &rarr; *\"rate\":* puntuación de las películas recibida por los usuarios de la página. \n\nEn base a la nota media de las películas dirigidas, hemos designado a los mejores directores de cine.\n\nEn la tabla siguiente, se mostrarán los directores mejores calificados por los usuarios de *IMDb* en función a la nota media de las películas que han dirigido.\n\n#\n\n```{r}\n#| code-fold: true\n#- Primero agrruparemos por directores, obtendremos la media de las películas y obtendremos los 5 primeros con mejor rate\nimbd_director <- imbd_allTime %>% \n  group_by(director) %>% \n  summarise(Avg_rating = mean(rating, na.rm = TRUE)) %>% \n  ungroup() %>% \n  slice_max(Avg_rating, n = 10) %>% \n  head(., n = 10)\n#- A continuación, creamos una tabla con los resultados\nimbd_director %>% \n  mutate(Rank = row_number(), .before = director) %>% \n  gt() %>%\n  cols_label(\n    director = \"Director\",\n    Avg_rating = \"Nota Media\"\n  ) %>%\n  fmt_number(columns = c(\"Avg_rating\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 10 Directores de Cine\",\n    subtitle = \"Según valoración de los usuarios de IMDb\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(70),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE)\n```\n--- \n\n## 4.1 Puntuaciones según MetaScore {background-image=\"./imagenes/my_IA_img10.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\n**\"Metascore\":** Puntuación obtenida según la opinión de los críticos de cine &rarr; rango de 0 a 100.\n<br>\n\n```{r}\n#| code-fold: true\n#- Repetiremos el mismo proceso para obtener la segunda tabla\nimbd_metacritic <- imbd_allTime %>% \n  group_by(director) %>% \n  summarise(Avg_score = mean(metascore, na.rm = TRUE)) %>% \n  ungroup() %>% \n  slice_max(Avg_score, n = 10) %>% \n  head(., 10)\n#- A continuación, creamos la tabla\nimbd_metacritic %>% \n  mutate(Rank = row_number(), .before = director) %>% \n  gt() %>%\n  cols_label(\n    director = \"Director\",\n    Avg_score = \"Metascore\"\n  ) %>%\n  fmt_number(columns = c(\"Avg_score\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 10 Directores de cine\",\n    subtitle = \"Según Metascore\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(65),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE)\n```\n\n. . . \n\n# 5. GOAT Actores {background-image=\"./imagenes/my_IA_img11.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nConsiderando los *Óscar* como el galardón más prestigioso, mostraremos a los actores que más han obtenido este premio a lo largo de su carrera cinematográfica mediante un gráfico de barras con datos obtenidos de *Kaggle*.\n\n#\n\n```{r}\n#| code-fold: true\n#- Primero organizamos los datos con los 10 actores con más Óscars ganados\nactors_oscar <- actors %>% \n  select(Name, Oscars) %>% \n  arrange((desc(Oscars))) %>% \n  slice_head(., n = 5)\n#- A continuación, realizamos el gráfico de barras\nggplot(actors_oscar) +\n  geom_bar(aes(x = reorder(Name, -Oscars), y = Oscars, fill = Name), stat = \"identity\", show.legend = FALSE) +\n  labs(title = \"Actores con Mayor Número de Oscars\",\n       x = \"Nombre Actor\",\n       y = \"Oscars\",\n       caption = \"Datos provenientes de Kaggle\") +\n  theme_classic()\n```\n\n--- \n\nTeniendo en cuenta todas las nominaciones a premios &rarr; *Óscar, BAFTA y Globos de Oro*, así como las veces que un actor ha ganado en estas tres categorías:\n\n. . . \n\n```{r}\n#| code-fold: true\n#- Organizaremos los datos sumando todas las nominaciones y premios para cada actor, pasaremos a formato long y haremos el gráfico de barras\nactors_prizes <- actors %>% \n  mutate(prizes_total = Oscars + BAFTA + Golden.Globes, nominations_total = Oscar.Nominations + BAFTA.Nominations + Golden.Globe.Nominations) %>% \n  select(Name, prizes_total, nominations_total) %>% \n  slice_max(tibble(prizes_total, nominations_total), n = 5) %>% \n  pivot_longer(cols = 2:3, names_to = \"totals\", values_to = \"values\") %>% \n  ggplot(aes(reorder(Name, -values), values, fill = totals)) +\n    geom_bar(stat=\"identity\", position=\"dodge\") +\n    geom_text(aes(label = values), position = position_dodge(width=0.9), vjust=-0.25) +\n    labs(title = \"Actores con más Premios y Nominaciones\",\n         subtitle = \"Analizando Óscars, BAFTA y Globos de Oro\",\n         caption = \"Datos provenientes de Kaggle\",\n         x = \"Nombre Actor\",\n         y = \"Nominaciones y Premios\",\n         fill = NULL,\n         ) +\n  scale_fill_discrete(labels = c(\"Nominaciones\", \"Premios\")) + theme_classic()\nactors_prizes\n\n```\n\n\n## 6. Análisis Geográfico: Actores\n```{r}\n#| code-fold: true\n#FINAL\n#Ubicación geográfica de los 100 actores ganadores de Oscar\nactors_by_country <- actors %>%\n  group_by(Place.of.Birth, Name) %>%\n  summarise(NumActors = n_distinct(Name),\n    TotalOscars = sum(Oscars, na.rm = TRUE)) %>%\n  ungroup() %>% \n  filter(TotalOscars > 0) %>%\n  mutate(Country = sub(\".*,\\\\s*(.*)$\", \"\\\\1\", Place.of.Birth)) #Creamos una nueva columna \"Country\" para quedarnos sólo con el nombre del país de procedencia de cada actor\n\n# Contamos el número de actores ganadores por país\nactors_by_country_count <- actors_by_country %>%\n  group_by(Country) %>%\n  summarise(NumActors = sum(NumActors))\n\n#-------- Map Plot\nlibrary(tmap) \ndata(World) #- hacemos accesibles 1 df\nworld <- World\nworld <- World %>%\n  filter(name != \"Antarctica\") %>%\n  select(name, geometry)\nrm(World)\n\n# Nombre de columnas consistente para el JOIN\nactors_by_country_count <- actors_by_country_count %>% rename(name = Country)\n\n# Join\nactors_map_data <- left_join(world, actors_by_country_count, by = \"name\")\n\n# Map\ntm_shape(actors_map_data) +\n  tm_borders() +\n  tm_fill(col = \"NumActors\", style = \"jenks\", palette = \"Blues\", title = \"Número de Actores\") +\n  tm_text(\"NumActors\", size = 0.8, root = 4, col = \"black\") +\n  tm_layout(\n    legend.format = list(fun = function(x) formatC(x, format = \"d\"))) #Legenda como Integer\n\n#El stilo jenks es necesario: \"jenks\": Jenks natural breaks classification, an optimization method that minimizes the variance within each class and maximizes the variance between classes.\n\n```\n\n\n```{r}\n#| code-fold: true\n\n```\n\n## 7. Conclusiones! {background-image=\"./imagenes/my_IA_img2.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\n**Éxito financiero:**\n\"Avatar\" y \"Avengers: Endgame\" lideran taquillas, resaltando la relevancia de acción y superhéroes en los últimos años. Grandes productoras como Marvel Comics respaldan esta tendencia con franquicias icónicas.\n\n**Opiniones divergentes:** Rating y Metascore revelan discrepancias entre público y críticos, el cine es subjetivo.\n\n**Visión integral de la industria:** Existen diferentes maneras de evaluar un *éxito cinematográfico*. El cine es un campo MUY subjetivo.\n\n\n# ¡Gracias por su Atención! {background-image=\"./imagenes/my_IA_img2.png\" background-size=\"cover\" background-opacity=\"0.5\"}","srcMarkdownNoYaml":"\n\n# Introducción {background-image=\"./imagenes/my_IA_img3.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\n**Objetivo**: Analizar y visualizar datos clave de la industria\ncinematográfica y proporcionar una visión integral de lo que han sido\n\"éxitos\" en este contexto. <br> <br> Destacamos el rendimiento\nfinanciero que han tenido las películas, pero también consideramos\ntendencias con respecto a género y franquicias/marcas y además hacemos\nuna mención adicional a los actores de Hollywood con más reconocimientos\nen la escena internacional.\n\n# Datos: {background-image=\"./imagenes/my_IA_img3.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nPara el trabajo hemos usado tres fuentes de datos principales: <br> <br>\n**1. Box Office Mojo**: Website de datos de películas y su rendimiento\nfinanciero. <br> <br> **2. IMDB (Internet Movie Data Base): \"**\nInformación sobre las TOP 1000 pelícuas a nivel mundial. Clasificadas\npor ratings del público.<br> <br> **3. Top 100 Hollywood Actors**:\nDataframe de Kaggle. Es un ranking objetivo de los actores de Holywood\nbasando en premios y nominaciones.<br>\n\n. . .\n\n```{r}\n#Packetes y carga de datos\n#|echo: false\n# Estos son los Packages que hemos utilizado\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(gt)\nlibrary(gtExtras)\nlibrary(ggThemeAssist)\nlibrary(plotly)\nlibrary(sf)\nlibrary(maps)\nlibrary(tmap)\n```\n\n```{r}\n#Importamos Datos\n#|echo:false\nimbd_allTime <- read.csv(\"data/IMDB_Top1000_2023.csv\")\nboxoffice_top_world <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojointernationaltop1000.csv\")\nboxoffice_brands <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojobrandindices.csv\")\nboxoffice_genres <- read.csv(\"data/Boxoffice_Reveneus/boxofficemojotopgenres.csv\")\nboxoffice_fran <-read.csv(\"data/Boxoffice_Reveneus/boxofficemojotopfranchises.csv\")\nactors <- read.csv(\"data/Top100_GOAT_Hollywood_Actors.csv\")\n```\n\n# 1. Las más exitosas de todos los tiempos {background-image=\"./imagenes/my_IA_img9.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\n::: highlight-box\n```{=html}\n<style>\n  p {\n    background-color: rgba(0, 0, 0, 0.5);\n    padding: 20px;\n    color: white;\n    border-radius: 10px;\n  }\n</style>\n```\nExisten diferentes maneras de medir el éxito de una película. Sin\nembargo, nosotros/as aquí consideraremos dos métricas: el desempeño en\ntaquilla y la opinión del público.\n:::\n\n------------------------------------------------------------------------\n\n## Películas más taquilleras de la historia {background-image=\"./imagenes/my_IA_img9.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nDe acuerdo a Box Office Mojo, estas son lás 5 películas más éxitosas en\ntaquilla.\n\n```{r}\n#| echo: false\nbo_allTime <- boxoffice_top_world %>%\n  select(Rank, Title, Worldwide.Lifetime.Gross, Year)\n\n#Tabla\nt1 <- bo_allTime %>% \n  slice_max(n = 5, order_by = -Rank) %>% #ascending order \n  gt() %>%\n  cols_label( Title = \"Título\"\n    ,Worldwide.Lifetime.Gross = \"Ingresos Brutos\", \n             Year = \"Año\") %>%\n  cols_width(c(Worldwide.Lifetime.Gross, Year) ~ pct(8)) %>%\n  cols_width(c(Rank) ~ pct(3)) %>%\n  fmt_number(columns = c(Worldwide.Lifetime.Gross),\n             decimals = 0, \n             sep_mark = \",\")  %>%\n  tab_header(title = \"Top  5 Películas\",\n             subtitle = \"Basado en éxito en taquilla\") %>%\n  tab_source_note(md(\"Fuente: datos de [BoxOffice Mojo ](https://www.kaggle.com/datasets/somnath2/box-office)\")) %>%\n  tab_footnote(footnote = \"Dataset extraido de Kaggle\", \n               placement = \"right\",\n               location = cells_title(\"title\")) |>\n  tab_options(\n    #table.width = pct(50)  \n    table.font.size = 30,\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5)\n  )\nt1\n```\n\n. . .\n\n**Fun fact:** La diferencia entre los puestos uno y dos es mínima, 50M\ndolares approx. <br> <br> Como podemos ver, es innegable que las\npelículas de acción y superheroes han generado un fuerte interés en el\npúblico.\n--- \n\n```{r}\n#| code-fold: true\n#Plot\ntop_10_p <- bo_allTime %>%\n  slice_max(n = 10, order_by = -Rank) %>%#ascending order\n  mutate(Title = forcats::fct_reorder(Title, Worldwide.Lifetime.Gross)) %>%\n  ggplot(aes(x = Title, y = Worldwide.Lifetime.Gross/(1000000))) + \n  geom_col(aes(fill = Title)) +\n  coord_flip() + \n  #scale_x_continuous(limits = c(0, max(bo_allTime$Worldwide.Lifetime.Gross) + 500),\n   #                  breaks = seq(0, max(bo_allTime$Worldwide.Lifetime.Gross) + 500, by = 250)) +  \n  geom_text(aes(label = Title), hjust = 1.05, vjust = 0.5, size = 3.5, ) +\n  labs(title = \"Top 10 Películas más taquilleras de la Historia\",\n       subtitle = \" Ingresos brutos en milliones\",\n       x = \"Ingresos brutos mundiales\",\n       y = \"Titulo\") +\n  theme_minimal() + theme(legend.position = \"none\", # Remove legend\n                          axis.text.y = element_blank())  \ntop_10_p\n```\n\n# 2. Top Marcas en el Cine {background-image=\"./imagenes/my_IA_img6.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\nAhora analizaremos las productoras detras de los grandes éxitos. También desde una perspectiva financiera.\n\nComo podemos ver las productoras que encabezan la lista son: Marvel\nComics, Legendary Pictures y Lucasfilms. Como se ha mencionado, estas\nmarcas producen películas de superheroes y acción.\n\n#\n\n```{r}\n#| code-fold: true\ntop_stud_tab <- boxoffice_brands %>%\n  slice_max(n = 5, order_by = Total) %>%\n  select(Brand, Releases) \n\n#Tabla\nt3 <- top_stud_tab %>% \n  gt() %>%\n  cols_label( Brand = \"Marcas\",\n    Releases = \"Lanzamientos\") %>%\n # cols_width(c(Brand, Releases) ~ px(60))  %>%\n  tab_header(title = \"Top Marcas\", subtitle = \"Basado en éxito en taquilla\") %>%\ntab_source_note(md(\"Fuente: datos de [BoxOffice Mojo ](https://www.kaggle.com/datasets/somnath2/box-office)\"))%>%\n  tab_footnote(footnote = \"*Ingresos Brutos solo de USA y Canada\", \n               placement = \"right\",\n               location = cells_title(\"title\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(70),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE\n  )\nt3\n```\n--- \n\n```{r}\n#| code-fold: true\ntop_brands <- boxoffice_brands %>% slice_max(n = 10, order_by = Total)\ntop_brands$Brand <- as.factor(top_brands$Brand) #Brands as factor\n\n#Bubble Plot\nbubble_chart <- ggplot(top_brands, aes(x = Total/ (1000000), \n                                       y = Brand, size = Releases, \n                                       color = Brand)) +\n  geom_point(alpha = 0.7) +\n  xlim(c(0,16000)) +\n  scale_size_continuous(range = c(5, 15)) + #Setea el tamaño de los puntos\n  labs(title = \"Top 10 Marcas Cinematográficas\",\n       subtitle = \"De acuerdo a ingresos en taquilla\",\n       caption = \"*Ingresos Brutos solo de USA y Canada\",\n       x = \"Ingresos Brutos (en Millones)\",\n       y = \"Marcas\",\n       size = \"Releases\",\n       color = NULL) +\n  geom_vline(xintercept = 0) +\n  geom_hline(yintercept = \"Bad Robot\") +\n  theme_minimal() + theme(legend.title = element_blank()) + theme(legend.position = \"none\")\nbubble_chart\n```\n\n# 3. Las mejores de la historia...de acuerdo al público {background-image=\"./imagenes/my_IA_img8.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nLa segunda métrica que usaremos para medir el éxito de una película son\nlas críticas del público. Para ello usaremos la \"Internet Movie\nDatabase\". Así que a continuación, presentamos cuáles son las películas\ncon mejores ratings del público de la historia.\n\n# {background-image=\"./imagenes/my_IA_img8.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\n```{r}\n#| code-fold: true\n#Filtramos las 10 mejores películas según las críticas del público\nimbd_top_five <- imbd_allTime %>%\n  select(-X) %>%\narrange(desc(rating)) %>%\n   distinct(title, .keep_all = TRUE) %>% # Ordenamos de mayor a menor rating\n  slice_head(n = 5)         # Seleccionamos las 5 mejores películas\n#Creamos una tabla con las 5 mejores películas según las críticas del público\nbest_rated_table <- imbd_top_five %>%\n  dplyr::mutate(Rank = row_number()) %>%  # Agregamos una columna de rango empezando desde 1\n  gt() %>%\n  cols_move_to_start(\"Rank\") %>%\n  cols_label(\n    title = \"Título\",\n    rating = \"Rating\",\n    release_year = \"Año\",\n    genre = \"Género\"\n  ) %>%\n  fmt_number(columns = c(\"rating\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 5 Películas Mejor Calificadas por el Público\",\n    subtitle = \"Basado en las calificaciones de IMDb\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")\n  ) |>\n  tab_options(\n    table.font.size = 30,\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(1),\n    data_row.padding.horizontal = pct(0.3),\n    footnotes.multiline = FALSE\n  )\n\n# Imprimir la tabla\nbest_rated_table\n```\n\n\n# 4. IMBD Rating y Directores {background-image=\"./imagenes/my_IA_img10.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nDatos obtenidos de IMDb *(Internet Movie Database)* &rarr; *\"rate\":* puntuación de las películas recibida por los usuarios de la página. \n\nEn base a la nota media de las películas dirigidas, hemos designado a los mejores directores de cine.\n\nEn la tabla siguiente, se mostrarán los directores mejores calificados por los usuarios de *IMDb* en función a la nota media de las películas que han dirigido.\n\n#\n\n```{r}\n#| code-fold: true\n#- Primero agrruparemos por directores, obtendremos la media de las películas y obtendremos los 5 primeros con mejor rate\nimbd_director <- imbd_allTime %>% \n  group_by(director) %>% \n  summarise(Avg_rating = mean(rating, na.rm = TRUE)) %>% \n  ungroup() %>% \n  slice_max(Avg_rating, n = 10) %>% \n  head(., n = 10)\n#- A continuación, creamos una tabla con los resultados\nimbd_director %>% \n  mutate(Rank = row_number(), .before = director) %>% \n  gt() %>%\n  cols_label(\n    director = \"Director\",\n    Avg_rating = \"Nota Media\"\n  ) %>%\n  fmt_number(columns = c(\"Avg_rating\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 10 Directores de Cine\",\n    subtitle = \"Según valoración de los usuarios de IMDb\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(70),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE)\n```\n--- \n\n## 4.1 Puntuaciones según MetaScore {background-image=\"./imagenes/my_IA_img10.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\n**\"Metascore\":** Puntuación obtenida según la opinión de los críticos de cine &rarr; rango de 0 a 100.\n<br>\n\n```{r}\n#| code-fold: true\n#- Repetiremos el mismo proceso para obtener la segunda tabla\nimbd_metacritic <- imbd_allTime %>% \n  group_by(director) %>% \n  summarise(Avg_score = mean(metascore, na.rm = TRUE)) %>% \n  ungroup() %>% \n  slice_max(Avg_score, n = 10) %>% \n  head(., 10)\n#- A continuación, creamos la tabla\nimbd_metacritic %>% \n  mutate(Rank = row_number(), .before = director) %>% \n  gt() %>%\n  cols_label(\n    director = \"Director\",\n    Avg_score = \"Metascore\"\n  ) %>%\n  fmt_number(columns = c(\"Avg_score\"), decimals = 1) %>%\n  tab_header(\n    title = \"Top 10 Directores de cine\",\n    subtitle = \"Según Metascore\"\n  ) %>%\n  tab_source_note(\n    md(\"Fuente: datos de [IMDb](data/IMDB_Top1000_2023.csv)\")) |>\n    tab_options(\n    table.width = pct(80),\n    table.font.size = 35, \n    container.height = pct(65),\n    heading.padding = pct(0.5),\n    column_labels.padding = pct(0.5),\n    data_row.padding = pct(0.5),\n    footnotes.multiline = FALSE)\n```\n\n. . . \n\n# 5. GOAT Actores {background-image=\"./imagenes/my_IA_img11.png\" background-size=\"cover\" background-opacity=\"0.4\"}\n\nConsiderando los *Óscar* como el galardón más prestigioso, mostraremos a los actores que más han obtenido este premio a lo largo de su carrera cinematográfica mediante un gráfico de barras con datos obtenidos de *Kaggle*.\n\n#\n\n```{r}\n#| code-fold: true\n#- Primero organizamos los datos con los 10 actores con más Óscars ganados\nactors_oscar <- actors %>% \n  select(Name, Oscars) %>% \n  arrange((desc(Oscars))) %>% \n  slice_head(., n = 5)\n#- A continuación, realizamos el gráfico de barras\nggplot(actors_oscar) +\n  geom_bar(aes(x = reorder(Name, -Oscars), y = Oscars, fill = Name), stat = \"identity\", show.legend = FALSE) +\n  labs(title = \"Actores con Mayor Número de Oscars\",\n       x = \"Nombre Actor\",\n       y = \"Oscars\",\n       caption = \"Datos provenientes de Kaggle\") +\n  theme_classic()\n```\n\n--- \n\nTeniendo en cuenta todas las nominaciones a premios &rarr; *Óscar, BAFTA y Globos de Oro*, así como las veces que un actor ha ganado en estas tres categorías:\n\n. . . \n\n```{r}\n#| code-fold: true\n#- Organizaremos los datos sumando todas las nominaciones y premios para cada actor, pasaremos a formato long y haremos el gráfico de barras\nactors_prizes <- actors %>% \n  mutate(prizes_total = Oscars + BAFTA + Golden.Globes, nominations_total = Oscar.Nominations + BAFTA.Nominations + Golden.Globe.Nominations) %>% \n  select(Name, prizes_total, nominations_total) %>% \n  slice_max(tibble(prizes_total, nominations_total), n = 5) %>% \n  pivot_longer(cols = 2:3, names_to = \"totals\", values_to = \"values\") %>% \n  ggplot(aes(reorder(Name, -values), values, fill = totals)) +\n    geom_bar(stat=\"identity\", position=\"dodge\") +\n    geom_text(aes(label = values), position = position_dodge(width=0.9), vjust=-0.25) +\n    labs(title = \"Actores con más Premios y Nominaciones\",\n         subtitle = \"Analizando Óscars, BAFTA y Globos de Oro\",\n         caption = \"Datos provenientes de Kaggle\",\n         x = \"Nombre Actor\",\n         y = \"Nominaciones y Premios\",\n         fill = NULL,\n         ) +\n  scale_fill_discrete(labels = c(\"Nominaciones\", \"Premios\")) + theme_classic()\nactors_prizes\n\n```\n\n\n## 6. Análisis Geográfico: Actores\n```{r}\n#| code-fold: true\n#FINAL\n#Ubicación geográfica de los 100 actores ganadores de Oscar\nactors_by_country <- actors %>%\n  group_by(Place.of.Birth, Name) %>%\n  summarise(NumActors = n_distinct(Name),\n    TotalOscars = sum(Oscars, na.rm = TRUE)) %>%\n  ungroup() %>% \n  filter(TotalOscars > 0) %>%\n  mutate(Country = sub(\".*,\\\\s*(.*)$\", \"\\\\1\", Place.of.Birth)) #Creamos una nueva columna \"Country\" para quedarnos sólo con el nombre del país de procedencia de cada actor\n\n# Contamos el número de actores ganadores por país\nactors_by_country_count <- actors_by_country %>%\n  group_by(Country) %>%\n  summarise(NumActors = sum(NumActors))\n\n#-------- Map Plot\nlibrary(tmap) \ndata(World) #- hacemos accesibles 1 df\nworld <- World\nworld <- World %>%\n  filter(name != \"Antarctica\") %>%\n  select(name, geometry)\nrm(World)\n\n# Nombre de columnas consistente para el JOIN\nactors_by_country_count <- actors_by_country_count %>% rename(name = Country)\n\n# Join\nactors_map_data <- left_join(world, actors_by_country_count, by = \"name\")\n\n# Map\ntm_shape(actors_map_data) +\n  tm_borders() +\n  tm_fill(col = \"NumActors\", style = \"jenks\", palette = \"Blues\", title = \"Número de Actores\") +\n  tm_text(\"NumActors\", size = 0.8, root = 4, col = \"black\") +\n  tm_layout(\n    legend.format = list(fun = function(x) formatC(x, format = \"d\"))) #Legenda como Integer\n\n#El stilo jenks es necesario: \"jenks\": Jenks natural breaks classification, an optimization method that minimizes the variance within each class and maximizes the variance between classes.\n\n```\n\n\n```{r}\n#| code-fold: true\n\n```\n\n## 7. Conclusiones! {background-image=\"./imagenes/my_IA_img2.png\" background-size=\"cover\" background-opacity=\"0.5\"}\n\n**Éxito financiero:**\n\"Avatar\" y \"Avengers: Endgame\" lideran taquillas, resaltando la relevancia de acción y superhéroes en los últimos años. Grandes productoras como Marvel Comics respaldan esta tendencia con franquicias icónicas.\n\n**Opiniones divergentes:** Rating y Metascore revelan discrepancias entre público y críticos, el cine es subjetivo.\n\n**Visión integral de la industria:** Existen diferentes maneras de evaluar un *éxito cinematográfico*. El cine es un campo MUY subjetivo.\n\n\n# ¡Gracias por su Atención! {background-image=\"./imagenes/my_IA_img2.png\" background-size=\"cover\" background-opacity=\"0.5\"}"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","toc":false,"highlight-style":"a11y","number-sections":false,"incremental":false,"output-file":"my_slides_BigData.html"},"language":{"toc-title-document":"Tabla de contenidos","toc-title-website":"En esta página","related-formats-title":"Otros formatos","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Fuente","section-title-abstract":"Resumen","section-title-appendices":"Apéndices","section-title-footnotes":"Notas","section-title-references":"Referencias","section-title-reuse":"Reutilización","section-title-copyright":"Derechos de autor","section-title-citation":"Cómo citar","appendix-attribution-cite-as":"Por favor, cita este trabajo como:","appendix-attribution-bibtex":"BibTeX","title-block-author-single":"Autor/a","title-block-author-plural":"Autores/as","title-block-affiliation-single":"Afiliación","title-block-affiliation-plural":"Afiliaciones","title-block-published":"Fecha de publicación","title-block-modified":"Fecha de modificación","callout-tip-title":"Tip","callout-note-title":"Nota","callout-warning-title":"Advertencia","callout-important-title":"Importante","callout-caution-title":"Precaución","code-summary":"Código","code-tools-menu-caption":"Código","code-tools-show-all-code":"Mostrar todo el código","code-tools-hide-all-code":"Ocultar todo el código","code-tools-view-source":"Ver el código fuente","code-tools-source-code":"Ejecutar el código","code-line":"Línea","code-lines":"Líneas","copy-button-tooltip":"Copiar al portapapeles","copy-button-tooltip-success":"Copiado","repo-action-links-edit":"Editar esta página","repo-action-links-source":"Ver el código","repo-action-links-issue":"Informar de un problema","back-to-top":"Volver arriba","search-no-results-text":"Sin resultados","search-matching-documents-text":"documentos encontrados","search-copy-link-title":"Copiar el enlace en la búsqueda","search-hide-matches-text":"Ocultar resultados adicionales","search-more-match-text":"resultado adicional en este documento","search-more-matches-text":"resultados adicionales en este documento","search-clear-button-title":"Borrar","search-detached-cancel-button-title":"Cancelar","search-submit-button-title":"Enviar","search-label":"Buscar","toggle-section":"Alternar sección","toggle-sidebar":"Alternar barra lateral","toggle-dark-mode":"Alternar modo oscuro","toggle-reader-mode":"Alternar modo lector","toggle-navigation":"Navegación de palanca","crossref-fig-title":"Figura","crossref-tbl-title":"Tabla","crossref-lst-title":"Listado","crossref-thm-title":"Teorema","crossref-lem-title":"Lema","crossref-cor-title":"Corolario","crossref-prp-title":"Proposición","crossref-cnj-title":"Conjetura","crossref-def-title":"Definición","crossref-exm-title":"Ejemplo","crossref-exr-title":"Ejercicio","crossref-ch-prefix":"Capítulo","crossref-apx-prefix":"Apéndice","crossref-sec-prefix":"Sección","crossref-eq-prefix":"Ecuación","crossref-lof-title":"Listado de Figuras","crossref-lot-title":"Listado de Tablas","crossref-lol-title":"Listado de Listados","environment-proof-title":"Prueba","environment-remark-title":"Observación","environment-solution-title":"Solución","listing-page-order-by":"Ordenar por","listing-page-order-by-default":"Por defecto","listing-page-order-by-date-asc":"Menos reciente","listing-page-order-by-date-desc":"Más reciente","listing-page-order-by-number-desc":"De mayor a menor","listing-page-order-by-number-asc":"De menor a mayor","listing-page-field-date":"Fecha","listing-page-field-title":"Título","listing-page-field-description":"Descripción","listing-page-field-author":"Autor/a","listing-page-field-filename":"Nombre de archivo","listing-page-field-filemodified":"Fecha de modificación","listing-page-field-subtitle":"Subtítulo","listing-page-field-readingtime":"Tiempo de lectura","listing-page-field-categories":"Categorías","listing-page-minutes-compact":"{0} minutos","listing-page-category-all":"Todas","listing-page-no-matches":"No hay resultados"},"metadata":{"lang":"es","fig-responsive":false,"quarto-version":"1.3.450","auto-stretch":true,"knitr":{"opts_chunk":{"collapse":true,"comment":"#>","fig.asp":"7/9","out.width":"95%","fig.align":"center","fig.show":"hold","R.options":"options(scipen = 999)"}},"title":"Análisis de la Industria Cinematográfica","title-slide-attributes":{"data-background-image":"./imagenes/my_IA_img3.png","data-background-size":"cover","data-background-opacity":"0.5"},"date":"2023-12-01","footer":"##### <span style=\"color: darkred;\">[Quarto](https://quarto.org/)</span>\n","editor":{"markdown":{"wrap":72}},"theme":"league","scrollable":true,"height":900,"width":1600,"center-title-slide":true,"previewLinks":"auto","transition":"fade","fontcolor":"#262d36","slideNumber":"c/t"}}},"projectFormats":["html"]}